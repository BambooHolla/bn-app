<ion-header>
  <ion-navbar color="transparent">
    <ion-title>{{'ASSETS-ISSUING-ASSETS'|translate}}</ion-title>
  </ion-navbar>
</ion-header>
<ion-content #content>
  <div id="new_assets_form" class="common-form new-assets-form">
    <div class="logo-wrapper">
      <div class="assets-logo-shape-wrapper">
        <button mat-button class="assets-logo-shape logo-uploader" (click)="pickAssetsLogo()">
          <ng-container *ngIf="!formData.logo;else showLogo">
            <ali-icon name="ifm-zengjia"></ali-icon>
          </ng-container>
          <ng-template #showLogo>
            <img [src]="domSanitizer.bypassSecurityTrustUrl(formData.logo)" alt="LOGO">
          </ng-template>
        </button>
      </div>
      <div class="label">{{'UPLOAD_LOGO_IMAGE'|translate}}</div>
    </div>
    <!-- <div class="mat-container assetName">
      <mat-form-field>
        <input data-keyboard-view-position="height" data-keyboard-move-node="new_assets_form" matInput [placeholder]="'PLEASE_INPUT_ASSETNAME'|translate" [(ngModel)]="formData.assetName" set-input-status="assetName"  [errorStateMatcher]="matFormMatcherFactory('assetName')">
      </mat-form-field>
    </div> -->
    <div class="mat-container abbreviation">
      <mat-form-field>
        <input data-keyboard-view-position="height" data-keyboard-move-node="new_assets_form" matInput [placeholder]="'PLEASE_INPUT_ASSETS_ABBREVIATION'|translate" minlength="3" maxlength="5" [(ngModel)]="formData.abbreviation" set-input-status="abbreviation" [errorStateMatcher]="matFormMatcherFactory('abbreviation')">
        <mat-error *ngIf="errors?.abbreviation?.WRONG_CHAR">
          {{errors.abbreviation.WRONG_CHAR|translate}}
        </mat-error>
        <mat-error *ngIf="errors?.abbreviation?.TOO_SHORT">
          {{errors.abbreviation.TOO_SHORT|translate}}
        </mat-error>
        <mat-error *ngIf="errors?.abbreviation?.TOO_LONG">
          {{errors.abbreviation.TOO_LONG|translate}}
        </mat-error>
      </mat-form-field>
    </div>
    <div class="mat-container genesisAddress">
      <mat-form-field>
        <input data-keyboard-view-position="height" data-keyboard-move-node="new_assets_form" matInput [placeholder]="'PLEASE_INPUT_ASSETS_GENESISADDRESS'|translate" minlength="34" maxlength="34" [(ngModel)]="formData.genesisAddress" set-input-status="genesisAddress" [errorStateMatcher]="matFormMatcherFactory('genesisAddress')">
        <button matSuffix mat-icon-button (click)="routeTo('pay-select-my-local-contacts',{auto_return:true,mode:'select-address'})">
          <ali-icon name="ifm-tongxunlu"></ali-icon>
        </button>
        <mat-error *ngIf="errors?.genesisAddress?.WRONG_ADDRESS">
          {{errors.genesisAddress.WRONG_ADDRESS|translate}}
        </mat-error>
      </mat-form-field>
    </div>
    <!-- <div class="mat-container summary">
      <mat-form-field>
        <textarea matInput [placeholder]="'PLEASE_BRIEFLY_DESCRIBE_YOUR_ASSETS'|translate" [(ngModel)]="formData.summary" set-input-status="summary"  [errorStateMatcher]="matFormMatcherFactory('summary')" [maxlength]="summary_maxlength">
        </textarea>
        <mat-hint align="end">{{formData.summary?.length || 0}}/{{summary_maxlength}}</mat-hint>
      </mat-form-field>
    </div> -->
    <div class="mat-container rate">
      <div class="left">
        1 IBT =
      </div>
      <!-- <div class="center">
        <ng-container *ngIf="formData.rate;else rateValue">
          <span class="placeholder">{{formData.rate|number:'1.0-4'}}</span>
        </ng-container>
        <ng-template #rateValue>
          {{'ASSETS_rate'|translate}}
        </ng-template>
      </div> -->
      <mat-form-field>
        <input data-keyboard-view-position="height" data-keyboard-move-node="new_assets_form" matInput [placeholder]="'ASSETS_rate'|translate" type="number" [(ngModel)]="formData.rate" set-input-status="rate" [errorStateMatcher]="matFormMatcherFactory('rate')">
        <mat-error *ngIf="errors?.rate?.RATE_TOO_SMALL">
          {{errors.rate.RATE_TOO_SMALL|translate}}
        </mat-error>
        <mat-error *ngIf="errors?.rate?.RATE_TOO_LARGE">
          {{errors.rate.RATE_TOO_LARGE|translate}}
        </mat-error>
      </mat-form-field>
    </div>
    <div class="mat-container expectedIssuedAssets">
      <mat-form-field>
        <input data-keyboard-view-position="height" data-keyboard-move-node="new_assets_form" matInput [placeholder]="'ASSETS_expectedIssuedAssets'|translate" type="number" [(ngModel)]="formData.expectedIssuedAssets" set-input-status="expectedIssuedAssets" [errorStateMatcher]="matFormMatcherFactory('expectedIssuedAssets')">
        <mat-error *ngIf="errors?.expectedIssuedAssets?.RATE_TOO_LARGE">
          {{errors.expectedIssuedAssets.WRONG_RANGE|translate}}
        </mat-error>
      </mat-form-field>
    </div>
    <div class="mat-container expectedFrozenIBTs">
      <mat-form-field>
        <input data-keyboard-view-position="height" data-keyboard-move-node="new_assets_form" matInput [placeholder]="'PLEASE_INPUT_RAISED_IBT'|translate" type="number" [(ngModel)]="formData.expectedFrozenIBTs" set-input-status="expectedFrozenIBTs" [errorStateMatcher]="matFormMatcherFactory('expectedFrozenIBTs')">
        <mat-error *ngIf="errors?.expectedFrozenIBTs?.WRONG_RANGE">
          {{errors.expectedFrozenIBTs.WRONG_RANGE|translate}}
        </mat-error>
      </mat-form-field>
    </div>
    <div class="mat-container expectedIssuedBlockHeight">
      <mat-form-field>
        <span matPrefix class="prefix-info">{{'ISSUED_BLOCK_HEIGHT'|translate}}</span>
        <input data-keyboard-view-position="top" data-keyboard-move-node="new_assets_form" matInput [(ngModel)]="formData.expectedIssuedBlockHeight" set-input-status="expectedIssuedBlockHeight" [errorStateMatcher]="matFormMatcherFactory('expectedIssuedBlockHeight')" type="number" [matAutocomplete]="autoExpectedIssuedBlockHeight">
        <mat-error *ngIf="errors?.expectedIssuedBlockHeight?.WRONG_RANGE">
          {{errors.expectedIssuedBlockHeight.WRONG_RANGE|translate}}
        </mat-error>
        <mat-autocomplete class="expectedIssuedBlockHeight-autocomplete" #autoExpectedIssuedBlockHeight="matAutocomplete">
          <mat-option *ngFor="let option of expectedIssuedBlockHeightOptions" [value]="option">
            <div class="left">
              <div class="label">{{'BLOCK_height'|translate}}</div>
              <div class="value">{{option}}</div>
            </div>
            <div class="right">
              <div class="label">{{'ESTIMATED_TIME'|translate}}</div>
              <div class="value">{{blockHeightTime(option)|amDateFormat:"YYYY.MM.DD"}}</div>
            </div>
          </mat-option>
        </mat-autocomplete>
        <mat-hint align="end" *ngIf="formData.expectedIssuedBlockHeight">
          <ali-icon name="ifm-wancheng"></ali-icon>
          {{'ESTIMATED_TIME'|translate}} : {{blockHeightTime()|amDateFormat:"YYYY-MM-DD HH:mm:ss"}}
        </mat-hint>
      </mat-form-field>
    </div>
  </div>
  <div class="footer">
    <button mat-button class="submit-button" [disabled]="!canSubmit" (click)="submit()">{{'ISSUED_IMMEDIATELY'|translate}}</button>
  </div>
</ion-content>
<ion-footer [keyboardAttach]="content"></ion-footer>
